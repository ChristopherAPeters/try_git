{
  "summary": {
    "title": "API gateway",
    "owner": "Security team",
    "description": "The interface that customers use to access the Commure platform in order to store or retrieve health data."
  },
  "detail": {
    "contributors": [],
    "diagrams": [
      {
        "title": "API gateway processing data flow diagram",
        "thumbnail": "./public/content/images/thumbnail.jpg",
        "id": 0,
        "diagramJson": {
          "cells": [
            {
              "type": "tm.Actor",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 417,
                "y": 14
              },
              "angle": 0,
              "id": "129c0947-4c8c-4b8e-a5ab-4084a151f503",
              "z": 1,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Customers"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Boundary",
              "smooth": true,
              "source": {
                "x": 55,
                "y": 71
              },
              "target": {
                "x": 1059,
                "y": 73
              },
              "vertices": [
                {
                  "x": 36,
                  "y": 86
                },
                {
                  "x": 143,
                  "y": 131
                },
                {
                  "x": 868,
                  "y": 162
                }
              ],
              "id": "ed870d7a-e6d8-4848-9b03-10bace1ff2c3",
              "z": 2,
              "attrs": {}
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 455,
                "y": 268
              },
              "angle": 0,
              "id": "a60cc98d-48ab-4d9f-b202-2baf2ad1d456",
              "z": 3,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "API gateway"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "a60cc98d-48ab-4d9f-b202-2baf2ad1d456"
              },
              "target": {
                "id": "129c0947-4c8c-4b8e-a5ab-4084a151f503"
              },
              "vertices": [
                {
                  "x": 539,
                  "y": 204
                },
                {
                  "x": 530,
                  "y": 163
                }
              ],
              "id": "afe9365c-886f-420d-bbb4-7a7c46ac2917",
              "labels": [
                {
                  "position": {
                    "distance": 0.5000027238614155,
                    "offset": 20.006246908548537
                  },
                  "attrs": {
                    "text": {
                      "text": "API response",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 4,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "129c0947-4c8c-4b8e-a5ab-4084a151f503"
              },
              "target": {
                "id": "a60cc98d-48ab-4d9f-b202-2baf2ad1d456"
              },
              "vertices": [
                {
                  "x": 451,
                  "y": 182
                }
              ],
              "id": "0acbef74-faa0-4aa0-8b90-1de74f82fb1a",
              "labels": [
                {
                  "position": {
                    "distance": 0.523475308175506,
                    "offset": 52.07027440673604
                  },
                  "attrs": {
                    "text": {
                      "text": "API request",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 5,
              "hasOpenThreats": false,
              "isPublicNetwork": true,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 948,
                "y": 264
              },
              "angle": 0,
              "id": "ab6a1689-95f4-4538-bd26-1e6a530c9f6e",
              "z": 7,
              "hasOpenThreats": false,
              "outOfScope": true,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isOutOfScope"
                },
                "text": {
                  "text": "Authentication"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Store",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 99,
                "y": 628
              },
              "angle": 0,
              "id": "56c5e00c-eb4f-44c1-93b5-ab2dddce39ff",
              "z": 10,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Policy Store"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Store",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 943,
                "y": 412
              },
              "angle": 0,
              "id": "c72cb1cb-3739-4f0a-b31f-c0fe4ac1cc2c",
              "z": 11,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "User credential database"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "ab6a1689-95f4-4538-bd26-1e6a530c9f6e"
              },
              "target": {
                "id": "a60cc98d-48ab-4d9f-b202-2baf2ad1d456"
              },
              "vertices": [
                {
                  "x": 734,
                  "y": 340
                },
                {
                  "x": 677,
                  "y": 340
                }
              ],
              "id": "2ca019ab-0861-47ce-bb91-91e76b0b2994",
              "labels": [
                {
                  "position": {
                    "distance": 0.4647242457218474,
                    "offset": -20.606938260518096
                  },
                  "attrs": {
                    "text": {
                      "text": "AuthN token?",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 13,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 142,
                "y": 280
              },
              "angle": 0,
              "id": "eae0630a-2045-4b82-9bad-a743e63197d7",
              "z": 15,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Authorization -\nuser level"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "eae0630a-2045-4b82-9bad-a743e63197d7"
              },
              "target": {
                "id": "a60cc98d-48ab-4d9f-b202-2baf2ad1d456"
              },
              "vertices": [
                {
                  "x": 335,
                  "y": 275
                }
              ],
              "id": "d0a2aa52-b709-4d46-adf2-ad9f4837d546",
              "labels": [
                {
                  "position": {
                    "distance": 0.40418675578411256,
                    "offset": -27.77411953674724
                  },
                  "attrs": {
                    "text": {
                      "text": "AuthZ decision",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 16,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "a60cc98d-48ab-4d9f-b202-2baf2ad1d456"
              },
              "target": {
                "id": "eae0630a-2045-4b82-9bad-a743e63197d7"
              },
              "vertices": [],
              "id": "64fa7bee-e61d-41ac-a71b-8ca81e69494b",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "AuthZ request",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 17,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 330,
                "y": 394
              },
              "angle": 0,
              "id": "51e7f0d6-f179-4c95-929c-2a5e8756ea33",
              "z": 19,
              "hasOpenThreats": false,
              "outOfScope": true,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isOutOfScope"
                },
                "text": {
                  "text": "Rate limiting"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Actor",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 94,
                "y": 444
              },
              "angle": 0,
              "id": "002a8615-3771-41a8-a775-ec22518ef905",
              "z": 20,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Policy evaluation"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "56c5e00c-eb4f-44c1-93b5-ab2dddce39ff"
              },
              "target": {
                "id": "002a8615-3771-41a8-a775-ec22518ef905"
              },
              "vertices": [
                {
                  "x": 205,
                  "y": 560
                }
              ],
              "id": "90ef0101-2ff1-49ae-9f89-bd26a0182d11",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "Retrieve policy",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 21,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "002a8615-3771-41a8-a775-ec22518ef905"
              },
              "target": {
                "id": "56c5e00c-eb4f-44c1-93b5-ab2dddce39ff"
              },
              "vertices": [
                {
                  "x": 127,
                  "y": 568
                }
              ],
              "id": "8fdd2ef7-6364-4521-8d98-755c79e0347f",
              "labels": [
                {
                  "position": {
                    "distance": 0.46084706515501767,
                    "offset": 43.71368981677311
                  },
                  "attrs": {
                    "text": {
                      "text": "Request policy",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 22,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "eae0630a-2045-4b82-9bad-a743e63197d7"
              },
              "target": {
                "id": "002a8615-3771-41a8-a775-ec22518ef905"
              },
              "vertices": [],
              "id": "df623404-a188-4924-896c-48d1176ecc14",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "Policy check",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 23,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 20,
                "y": 199
              },
              "angle": 0,
              "id": "fa26f0d3-cbc1-4ca1-8815-3e69b9617e9c",
              "z": 24,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Admin\ninterface"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Actor",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 433,
                "y": 590
              },
              "angle": 0,
              "id": "43dbbb37-83b1-4430-aacd-9a466fecb653",
              "z": 25,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Commure employees"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "43dbbb37-83b1-4430-aacd-9a466fecb653"
              },
              "target": {
                "id": "56c5e00c-eb4f-44c1-93b5-ab2dddce39ff"
              },
              "vertices": [],
              "id": "f65dd10c-e743-4d79-8560-43cb2eae4dac",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "Create/read/edit/del\npolicies",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 26,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 628,
                "y": 429
              },
              "angle": 0,
              "id": "50dbe270-28a4-402a-a5f6-3f935f59e5aa",
              "z": 27,
              "hasOpenThreats": false,
              "outOfScope": true,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isOutOfScope"
                },
                "text": {
                  "text": "logging"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "ab6a1689-95f4-4538-bd26-1e6a530c9f6e"
              },
              "target": {
                "id": "a60cc98d-48ab-4d9f-b202-2baf2ad1d456"
              },
              "vertices": [
                {
                  "x": 744,
                  "y": 281
                }
              ],
              "id": "06fbcdc4-450e-4369-bffb-dc11514821ff",
              "labels": [
                {
                  "position": {
                    "distance": 0.5352596560641051,
                    "offset": 31.431285101312504
                  },
                  "attrs": {
                    "text": {
                      "text": "AuthN request",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 28,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 460,
                "y": 456
              },
              "angle": 0,
              "id": "59077f5e-22ab-40cd-be68-d2362e33cd7e",
              "z": 29,
              "hasOpenThreats": false,
              "outOfScope": true,
              "reasonOutOfScope": "Need their own threat models",
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isOutOfScope"
                },
                "text": {
                  "text": "Services"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Boundary",
              "smooth": true,
              "source": {
                "x": 30,
                "y": 138
              },
              "target": {
                "x": 69,
                "y": 346
              },
              "vertices": [
                {
                  "x": 110,
                  "y": 191
                },
                {
                  "x": 154,
                  "y": 263
                }
              ],
              "id": "0c828038-3200-4f61-912a-41ae48f23415",
              "z": 30,
              "attrs": {}
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "a60cc98d-48ab-4d9f-b202-2baf2ad1d456"
              },
              "target": {
                "id": "59077f5e-22ab-40cd-be68-d2362e33cd7e"
              },
              "vertices": [
                {
                  "x": 482,
                  "y": 410
                }
              ],
              "id": "b3fd3ed9-a32a-4ae9-92b7-3163210e6523",
              "labels": [
                {
                  "position": {
                    "distance": 0.38745220701719774,
                    "offset": 29.956766655410405
                  },
                  "attrs": {
                    "text": {
                      "text": "API request",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 31,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "59077f5e-22ab-40cd-be68-d2362e33cd7e"
              },
              "target": {
                "id": "a60cc98d-48ab-4d9f-b202-2baf2ad1d456"
              },
              "vertices": [
                {
                  "x": 539,
                  "y": 417
                }
              ],
              "id": "72dcc324-ece8-444e-8e0f-20fbd90f314e",
              "labels": [
                {
                  "position": {
                    "distance": 0.500020981838873,
                    "offset": 48.72777853574158
                  },
                  "attrs": {
                    "text": {
                      "text": "API response",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 32,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "smooth": true,
              "source": {
                "id": "fa26f0d3-cbc1-4ca1-8815-3e69b9617e9c"
              },
              "target": {
                "x": 465,
                "y": 270
              },
              "vertices": [
                {
                  "x": 228,
                  "y": 197
                }
              ],
              "id": "a6541c71-4680-40c8-93b6-99817ff64e9c",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "Commands",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 33,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            }
          ]
        },
        "size": {
          "height": 775,
          "width": 1153.49365234375
        }
      }
    ],
    "reviewer": "Architecure team"
  }
}